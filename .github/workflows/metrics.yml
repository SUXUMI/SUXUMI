# =============================================================================
# Lowlighter/Metrics â€” Rich SVG Infographics for GitHub Profile
# https://github.com/lowlighter/metrics
#
# HOW TO ACTIVATE:
#   1. Create a GitHub Personal Access Token (classic):
#      - Go to https://github.com/settings/tokens
#      - Select scopes: public_repo, read:user
#   2. Add it as a repository secret named METRICS_TOKEN:
#      - Go to https://github.com/SUXUMI/SUXUMI/settings/secrets/actions
#   3. Uncomment the entire workflow below (remove the leading '# ' from each line)
#   4. Uncomment the corresponding <img> tags in README.md
#   5. Run the workflow manually from Actions tab, or wait for the daily schedule
#
# The workflow generates SVG files and commits them to this repo.
# README.md references them as <img src="/metrics-calendar.svg"> etc.
# =============================================================================

name: Metrics
on:
  schedule:
    - cron: "0 4 * * *"   # Runs daily at 4:00 AM UTC
  workflow_dispatch:        # Allows manual trigger from Actions tab

jobs:
  metrics:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:

      # SUXUMI
      # --- Contribution Calendar (isocalendar) ---
      - name: Contribution Calendar
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN_SUXUMI }}
          user: SUXUMI
          template: classic
          base: ""
          filename: metrics-calendar_suxumi.svg
          plugin_isocalendar: yes
          plugin_isocalendar_duration: full-year

      # --- Language Breakdown ---
      - name: Language Stats
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: SUXUMI
          template: classic
          base: ""
          filename: metrics-languages_suxumi.svg
          plugin_languages: yes
          plugin_languages_sections: most-used
          plugin_languages_categories: markup, programming
          plugin_languages_colors: github
          plugin_languages_limit: 10
          plugin_languages_details: percentage, bytes-size

      # --- Achievements ---
      - name: Achievements
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN_SUXUMI }}
          user: SUXUMI
          template: classic
          base: ""
          filename: metrics-achievements_suxumi.svg
          plugin_achievements: yes
          plugin_achievements_display: compact

      # grigolt-ldi
      # --- Contribution Calendar (isocalendar) ---
      - name: Contribution Calendar
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN_GRIGOLTLDI }}
          user: SUXUMI
          template: classic
          base: ""
          filename: metrics-calendar_grigolt-ldi.svg
          plugin_isocalendar: yes
          plugin_isocalendar_duration: full-year

      # --- Language Breakdown ---
      - name: Language Stats
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN_GRIGOLTLDI }}
          user: SUXUMI
          template: classic
          base: ""
          filename: metrics-languages_grigolt-ldi.svg
          plugin_languages: yes
          plugin_languages_sections: most-used
          plugin_languages_categories: markup, programming
          plugin_languages_colors: github
          plugin_languages_limit: 10
          plugin_languages_details: percentage, bytes-size

      # --- Achievements ---
      - name: Achievements
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN_GRIGOLTLDI }}
          user: SUXUMI
          template: classic
          base: ""
          filename: metrics-achievements_grigolt-ldi.svg
          plugin_achievements: yes
          plugin_achievements_display: compact
